<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGDEA - Sistema de Gesti√≥n Documental Electr√≥nica de Archivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .search-container {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-box {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .clear-btn {
            padding: 15px 25px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .clear-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .tree-container {
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
        }

        /* Estilos del √°rbol mejorados */
        ul.tree, ul.tree ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        ul.tree ul {
            margin-left: 25px;
            border-left: 2px solid #e9ecef;
            padding-left: 20px;
        }

        ul.tree li {
            margin: 8px 0;
            position: relative;
        }

        ul.tree li::before {
            content: '';
            position: absolute;
            left: -22px;
            top: 15px;
            width: 20px;
            height: 2px;
            background: #e9ecef;
        }

        ul.tree li:last-child::after {
            content: '';
            position: absolute;
            left: -22px;
            top: 15px;
            bottom: 0;
            width: 2px;
            background: white;
        }

        .caret {
            cursor: pointer;
            user-select: none;
            display: inline-flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #2c3e50;
        }

        .caret:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .caret::before {
            content: "‚ñ∂";
            color: #667eea;
            display: inline-block;
            margin-right: 8px;
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .caret-down::before {
            transform: rotate(90deg);
        }

        .nested {
            display: none;
            animation: slideDown 0.3s ease;
        }

        .active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Elementos sin hijos */
        .tree li:not(:has(.caret)) {
            padding: 8px 12px;
            margin: 4px 0;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #28a745;
            transition: all 0.3s ease;
        }

        .tree li:not(:has(.caret)):hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        /* Resaltado para resultados de b√∫squeda */
        mark {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
            box-shadow: 0 1px 3px rgba(255, 215, 0, 0.3);
        }

        /* Estad√≠sticas de b√∫squeda */
        .search-stats {
            margin-top: 15px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            font-size: 14px;
            color: #1976d2;
            display: none;
        }

        .search-stats.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-input {
                min-width: 100%;
            }
            
            .tree-container {
                padding: 20px;
            }
            
            ul.tree ul {
                margin-left: 15px;
                padding-left: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå≥ SGDEA</h1>
            <p>Sistema de Gesti√≥n Documental Electr√≥nica de Archivo - √Årbol de Configuraci√≥n</p>
        </div>

        <div class="search-container">
            <div class="search-box">
                <input type="text" id="searchInput" class="search-input" placeholder="üîç Buscar m√≥dulos, componentes o funcionalidades...">
                <button class="search-btn" onclick="performSearch()">Buscar</button>
                <button class="clear-btn" onclick="clearSearch()">Limpiar</button>
            </div>
            <div id="searchStats" class="search-stats"></div>
        </div>

        <div class="tree-container">
            <ul class="tree">
                <li>
                    <span class="caret caret-down">üèõÔ∏è SGDEA - Sistema de Gesti√≥n Documental Electr√≥nica de Archivo</span>
                    <ul class="nested active">
                        <li>
                            <span class="caret">‚öôÔ∏è SGDEA_PARAM_TRV - Parametrizaci√≥n Transversal</span>
                            <ul class="nested">
                                <li>
                                    <span class="caret">üî¢ SGDEA_NUM - Numeraci√≥n de Radicados</span>
                                    <ul class="nested">
                                        <li>üì• SGDEA_NUM_ENT - Radicados de Entrada</li>
                                        <li>üì§ SGDEA_NUM_SAL - Radicados de Salida</li>
                                        <li>üìã SGDEA_NUM_INT - Radicados Internos</li>
                                        <li>üìú SGDEA_NUM_RES - Actos Administrativos (Resoluciones)</li>
                                    </ul>
                                </li>
                                <li>
                                    <span class="caret">‚è∞ SGDEA_TRESP - Tiempos de Respuesta Normativos</span>
                                    <ul class="nested">
                                        <li>üìÖ SGDEA_TRESP_L142 - Plazos Ley 142</li>
                                        <li>üìÖ SGDEA_TRESP_L1755 - Plazos Ley 1755</li>
                                        <li>üìä SGDEA_TRESP_VIG - Vigencias y C√≥mputo de T√©rminos</li>
                                        <li>üö® SGDEA_TRESP_ALERT - Alertas por Vencimiento de T√©rminos</li>
                                    </ul>
                                </li>
                                <li>üåê SGDEA_PARAM_GLOBAL - Par√°metros Globales del Sistema</li>
                                <li>üìä SGDEA_META - Configuraci√≥n de Metadatos</li>
                                <li>üóÇÔ∏è SGDEA_CLASS - Clasificaci√≥n Documental (Cuadro de Clasificaci√≥n)</li>
                                <li>üìö SGDEA_TRD - Retenci√≥n Documental (TRD y TVD)</li>
                                <li>üìÅ SGDEA_EXP_CONF - Configuraci√≥n de Expedientes</li>
                                <li>üè¢ SGDEA_ORG - Estructura Org√°nica (Dependencias)</li>
                                <li>üë• SGDEA_USR - Administraci√≥n de Usuarios y Grupos</li>
                                <li>üîê SGDEA_ROL - Administraci√≥n de Roles y Permisos</li>
                            </ul>
                        </li>
                        <li>
                            <span class="caret">üìÑ SGDEA_GEST_DOC - Gesti√≥n Documental</span>
                            <ul class="nested">
                                <li>
                                    <span class="caret">üì¨ SGDEA_RAD - Radicaci√≥n y Correspondencia</span>
                                    <ul class="nested">
                                        <li>üì• SGDEA_RAD_ENT - Radicaci√≥n de Documentos de Entrada</li>
                                        <li>üì§ SGDEA_RAD_SAL - Radicaci√≥n de Documentos de Salida</li>
                                        <li>üìã SGDEA_RAD_INT - Radicaci√≥n de Documentos Internos</li>
                                        <li>üìú SGDEA_RAD_RES - Emisi√≥n de Actos Administrativos (Resoluciones)</li>
                                    </ul>
                                </li>
                                <li>üîÑ SGDEA_TRAMITE - Gesti√≥n y Tr√°mite Interno de Documentos</li>
                                <li>üìÅ SGDEA_EXP - Gesti√≥n de Expedientes (Carpetas)</li>
                                <li>üìù SGDEA_VERS - Control de Versiones de Documentos</li>
                                <li>‚úÖ SGDEA_VALID - Validaciones y Reglas de Negocio</li>
                                <li>üîÑ SGDEA_STATE - Estados y Ciclo de Vida del Documento</li>
                                <li>üë• SGDEA_DUAL - Control Dual (Aprobaci√≥n Dual)</li>
                                <li>üìã SGDEA_PLANTILLAS - Plantillas y Generaci√≥n Documental</li>
                                <li>
                                    <span class="caret">üóÉÔ∏è SGDEA_ARCH_FIS - Administraci√≥n de Archivo F√≠sico</span>
                                    <ul class="nested">
                                        <li>üìç SGDEA_ARCH_LOC - Ubicaci√≥n y Almacenamiento F√≠sico</li>
                                        <li>üìñ SGDEA_PRESTAMOS - Pr√©stamos Documentales</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <span class="caret">üîó SGDEA_INTEROP - Interoperabilidad</span>
                            <ul class="nested">
                                <li>üìÆ SGDEA_SIPOST - Integraci√≥n con SIPOST (Operador 4-72)</li>
                                <li>‚úâÔ∏è SGDEA_CERTIMAIL - Integraci√≥n con Certimail (Operador 4-72)</li>
                                <li>üåê SGDEA_PQRS - Integraci√≥n con Portal PQRS (Sede Electr√≥nica)</li>
                                <li>üîå SGDEA_WEB_SERV - Servicios Web y API (Intercambio de Datos)</li>
                            </ul>
                        </li>
                        <li>
                            <span class="caret">üõ†Ô∏è SGDEA_SERV_TRANS - Servicios Transversales</span>
                            <ul class="nested">
                                <li>üîç SGDEA_BUSQUEDA - B√∫squeda de Documentos</li>
                                <li>üìä SGDEA_REPORT - Reportes e Indicadores</li>
                                <li>üîç SGDEA_CUMPL - Cumplimiento Normativo y Auditor√≠a</li>
                                <li>
                                    <span class="caret">üíæ SGDEA_PRESERV - Preservaci√≥n Digital</span>
                                    <ul class="nested">
                                        <li>üìÑ SGDEA_PRESERV_PDF - Almacenamiento en formato PDF/A</li>
                                        <li>üîí SGDEA_CUSTODIA - Cadena de Custodia Digital</li>
                                        <li>üìã SGDEA_COPIAS - Copias y Reproducciones Aut√©nticas</li>
                                    </ul>
                                </li>
                                <li>‚úçÔ∏è SGDEA_FIRMA_ELECT - Firma Electr√≥nica</li>
                                <li>üîê SGDEA_FIRMA_DIG - Firma Digital</li>
                                <li>üì§üì• SGDEA_IMP_EXP - Exportaci√≥n e Importaci√≥n de Datos</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Funci√≥n para normalizar texto (remover acentos y may√∫sculas) para b√∫squeda
            function normalizeText(str) {
                return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
            }

            // Manejo de colapso/expansi√≥n de ramas del √°rbol
            var toggler = document.getElementsByClassName("caret");
            for (var i = 0; i < toggler.length; i++) {
                toggler[i].addEventListener("click", function() {
                    this.parentElement.querySelector(".nested").classList.toggle("active");
                    this.classList.toggle("caret-down");
                });
            }

            // Funcionalidad de filtrado/b√∫squeda en el √°rbol
            var searchInput = document.getElementById('searchInput');
            var searchStats = document.getElementById('searchStats');
            
            function performSearch() {
                var filter = searchInput.value.trim();
                var filterNorm = normalizeText(filter);
                var matchCount = 0;
                var totalItems = 0;

                // Eliminar resaltados previos
                var marks = document.querySelectorAll('mark');
                marks.forEach(function(mark) {
                    var parent = mark.parentNode;
                    parent.replaceChild(document.createTextNode(mark.textContent), mark);
                    parent.normalize();
                });

                if (!filter) {
                    // Restaurar vista original si no hay filtro
                    var allItems = document.querySelectorAll('.tree li');
                    allItems.forEach(function(li) {
                        li.style.display = '';
                    });
                    
                    // Colapsar todas las ramas excepto la ra√≠z
                    var allNested = document.querySelectorAll('.nested');
                    allNested.forEach(function(ul) {
                        ul.classList.remove('active');
                    });
                    var allCarets = document.querySelectorAll('.caret');
                    allCarets.forEach(function(span) {
                        span.classList.remove('caret-down');
                    });
                    
                    // Mantener expandida la ra√≠z
                    var rootCaret = document.querySelector('.tree > li > .caret');
                    if (rootCaret) {
                        rootCaret.classList.add('caret-down');
                        var rootNested = rootCaret.parentElement.querySelector('.nested');
                        if (rootNested) rootNested.classList.add('active');
                    }
                    
                    searchStats.classList.remove('show');
                    return;
                }

                // Expandir todas las ramas para evaluar todos los nodos
                var nestedLists = document.querySelectorAll('.nested');
                nestedLists.forEach(function(ul) {
                    ul.classList.add('active');
                });
                var carets = document.querySelectorAll('.caret');
                carets.forEach(function(span) {
                    span.classList.add('caret-down');
                });

                // Filtrar elementos seg√∫n el texto
                var listItems = document.querySelectorAll('.tree li');
                totalItems = listItems.length;
                
                listItems.forEach(function(li) {
                    var text = li.firstChild.textContent || li.textContent;
                    if (normalizeText(text).includes(filterNorm)) {
                        li.style.display = '';
                        matchCount++;
                    } else {
                        li.style.display = 'none';
                    }
                });

                // Asegurar que los ancestros de un elemento coincidente permanezcan visibles
                listItems.forEach(function(li) {
                    if (li.style.display === 'none') {
                        var childItems = li.querySelectorAll('li');
                        childItems.forEach(function(child) {
                            if (child.style.display !== 'none') {
                                li.style.display = '';
                            }
                        });
                    }
                });

                // Resaltar las coincidencias encontradas
                listItems.forEach(function(li) {
                    if (li.style.display !== 'none') {
                        var labelElem = li.querySelector('.caret') || li;
                        var html = labelElem.innerHTML;
                        var regex = new RegExp(filter.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
                        labelElem.innerHTML = html.replace(regex, function(match) {
                            return '<mark>' + match + '</mark>';
                        });
                    }
                });

                // Mostrar estad√≠sticas de b√∫squeda
                searchStats.innerHTML = `üîç B√∫squeda: "${filter}" - ${matchCount} resultados encontrados de ${totalItems} elementos`;
                searchStats.classList.add('show');
            }

            function clearSearch() {
                searchInput.value = '';
                performSearch();
            }

            // Event listeners
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                } else {
                    performSearch();
                }
            });

            // Funciones globales para los botones
            window.performSearch = performSearch;
            window.clearSearch = clearSearch;

            // Expandir/colapsar todo
            window.expandAll = function() {
                var allNested = document.querySelectorAll('.nested');
                allNested.forEach(function(ul) {
                    ul.classList.add('active');
                });
                var allCarets = document.querySelectorAll('.caret');
                allCarets.forEach(function(span) {
                    span.classList.add('caret-down');
                });
            };

            window.collapseAll = function() {
                var allNested = document.querySelectorAll('.nested');
                allNested.forEach(function(ul) {
                    ul.classList.remove('active');
                });
                var allCarets = document.querySelectorAll('.caret');
                allCarets.forEach(function(span) {
                    span.classList.remove('caret-down');
                });
                // Mantener expandida solo la ra√≠z
                var rootCaret = document.querySelector('.tree > li > .caret');
                if (rootCaret) {
                    rootCaret.classList.add('caret-down');
                    var rootNested = rootCaret.parentElement.querySelector('.nested');
                    if (rootNested) rootNested.classList.add('active');
                }
            };

            // Atajos de teclado
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 'f':
                            e.preventDefault();
                            searchInput.focus();
                            break;
                        case 'e':
                            e.preventDefault();
                            expandAll();
                            break;
                        case 'c':
                            e.preventDefault();
                            collapseAll();
                            break;
                    }
                }
            });

            // Auto-focus en el campo de b√∫squeda
            searchInput.focus();
        });
    </script>
</body>
</html>
